<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Edumindcare ‚Äì L√†m Kh·∫£o S√°t</title>
<style>
/* ===== Chatbot widget (Edumindcare style) ===== */
#chatbot-btn{
  position:fixed;
  right:22px;
  bottom:22px;
  width:62px;
  height:62px;
  border-radius:50%;
  background:var(--brand);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  cursor:pointer;
  box-shadow:0 14px 34px rgba(59,130,246,.35);
  z-index:9999;
}

#chatbot-box{
  position:fixed;
  right:22px;
  bottom:96px;
  width:360px;
  max-height:520px;
  background:#fff;
  border-radius:18px;
  box-shadow:0 24px 60px rgba(17,24,39,.25);
  display:none;
  flex-direction:column;
  overflow:hidden;
  z-index:9999;
  border:1px solid var(--border);
}

#chatbot-header{
  background:linear-gradient(135deg, var(--brand), var(--brand-600));
  color:#fff;
  padding:14px 16px;
  font-weight:800;
  display:flex;
  align-items:center;
  gap:10px;
}

#chatbot-header span{
  font-size:14px;
  opacity:.9;
  font-weight:600;
}

#chatbot-messages{
  flex:1;
  padding:14px;
  overflow-y:auto;
  background:#f8fafc;
  display:flex;
  flex-direction:column;
  gap:10px;
  font-size:14px;
}

/* Bubble chat */
.chat-msg{
  max-width:82%;
  padding:10px 14px;
  border-radius:14px;
  line-height:1.5;
  animation:fadeUp .25s ease;
}

.chat-user{
  align-self:flex-end;
  background:var(--brand);
  color:#fff;
  border-bottom-right-radius:4px;
}

.chat-bot{
  align-self:flex-start;
  background:#fff;
  border:1px solid var(--border);
  color:#111;
  border-bottom-left-radius:4px;
}

#chatbot-input{
  display:flex;
  gap:8px;
  padding:12px;
  border-top:1px solid var(--border);
  background:#fff;
}

#chatbot-input input{
  flex:1;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  font-size:14px;
}

#chatbot-input input:focus{
  outline:none;
  border-color:var(--brand);
  box-shadow:0 0 0 3px rgba(59,130,246,.15);
}

#chatbot-input button{
  padding:10px 16px;
  border-radius:12px;
  border:none;
  background:var(--brand);
  color:#fff;
  font-weight:800;
  cursor:pointer;
}

#chatbot-input button:hover{
  background:var(--brand-600);
}

/* Animation */
@keyframes fadeUp{
  from{opacity:0; transform:translateY(6px)}
  to{opacity:1; transform:none}
}
  /* ====== Design tokens ====== */
  :root{
    --brand:#3b82f6;        /* blue-500 */
    --brand-600:#2563eb;
    --ink:#111827;          /* neutral-900 */
    --muted:#4b5563;        /* neutral-600 */
    --bg:#ffffff;
    --gray-50:#f8fafc;
    --border:#e5e7eb;
    --shadow:0 12px 30px rgba(17,24,39,.08);
  }

  /* ====== Base ====== */
  html{scroll-behavior:smooth}
  body{
    margin:0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    font-size:16px;
    line-height:1.65;
    color:var(--ink);
    background:var(--bg);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  img{max-width:100%; display:block}
  a{color:inherit; text-decoration:none}

  /* ====== Layout ====== */
  .container{max-width:1200px; padding:0 20px; margin:0 auto}
  .section{padding:64px 0}
  @media(min-width:1024px){ .section{padding:84px 0} }
  .alt{background:var(--gray-50)}
  .divider{height:1px; background:var(--border)}

  /* ====== Typography (simple & clear) ====== */
  .title-xxl{font-size:44px; line-height:1.15; font-weight:800; letter-spacing:0}
  @media(min-width:768px){ .title-xxl{font-size:56px} }
  .title-xl{font-size:30px; line-height:1.25; font-weight:800}
  @media(min-width:768px){ .title-xl{font-size:38px} }
  .lead{font-size:17px; color:var(--muted)}

  /* ====== Buttons ====== */
  .btn{display:inline-flex; align-items:center; gap:10px; padding:12px 18px; border-radius:12px; font-weight:800}
  .btn-lg{padding:14px 22px; font-size:16px}
  .btn-primary{background:#fff; color:#111; border:1.5px solid rgba(59,130,246,.5); box-shadow:0 10px 20px rgba(59,130,246,.15)}
  .btn-primary:hover{border-color:var(--brand); box-shadow:0 12px 26px rgba(59,130,246,.22)}
  .btn-white{background:#fff; border:1px solid var(--border); color:#111}
  .btn-white:hover{background:#f5f5f5}

  /* ====== Header ====== */
  .navbar{position:sticky; top:0; z-index:50; background:rgba(255,255,255,.95); backdrop-filter:saturate(160%) blur(8px); border-bottom:1px solid var(--border); transition:box-shadow .2s ease}
  .navbar.scrolled{box-shadow:0 6px 18px rgba(17,24,39,.06)}
  .nav-row{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 100px}
  .brand{font-size:28px; font-weight:800}
  @media(min-width:900px){ .brand{font-size:30px} }
  .nav-links{display:none; gap:26px; font-weight:700; font-size:15px}
  .nav-links a{opacity:.9}
  .nav-links a:hover{opacity:1}
  @media(min-width:900px){ .nav-links{display:flex} }

/* ===== Chatbot widget ===== */
#chatbot-btn{
  position:fixed;
  right:22px;
  bottom:22px;
  width:58px;
  height:58px;
  border-radius:50%;
  background:#3b82f6;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  cursor:pointer;
  box-shadow:0 12px 30px rgba(0,0,0,.25);
  z-index:9999;
}

#chatbot-box{
  position:fixed;
  right:22px;
  bottom:92px;
  width:340px;
  max-height:480px;
  background:#fff;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.25);
  display:none;
  flex-direction:column;
  overflow:hidden;
  z-index:9999;
}

#chatbot-header{
  background:#3b82f6;
  color:#fff;
  padding:12px 14px;
  font-weight:700;
}

#chatbot-messages{
  flex:1;
  padding:12px;
  overflow-y:auto;
  font-size:14px;
}

.chat-msg{margin-bottom:10px; line-height:1.4}
.chat-user{font-weight:700}
.chat-bot{color:#2563eb}

#chatbot-input{
  display:flex;
  gap:8px;
  padding:10px;
  border-top:1px solid #e5e7eb;
}

#chatbot-input input{
  flex:1;
  padding:8px 10px;
  border-radius:8px;
  border:1px solid #d1d5db;
}

#chatbot-input button{
  padding:8px 14px;
  border-radius:8px;
  border:none;
  background:#3b82f6;
  color:#fff;
  font-weight:700;
  cursor:pointer;
}


  /* ====== Grid & Media ====== */
  .grid-2{display:grid; grid-template-columns:1fr; gap:28px; align-items:center}
  @media(min-width:1024px){ .grid-2{grid-template-columns:1fr 1fr; gap:44px} }
  .half-img{height:280px; border-radius:16px; overflow:hidden; border:1px solid var(--border); box-shadow:var(--shadow)}
  .half-img>img{width:100%; height:100%; object-fit:cover; object-position:center}
  @media(min-width:768px){ .half-img{height:420px} }
  @media(min-width:1200px){ .half-img{height:520px} }

  /* ====== Hero ====== */
  .hero{display:grid; grid-template-columns:1fr; align-items:stretch}
  @media(min-width:1024px){ .hero{grid-template-columns:1fr 1fr} }
  .hero-text{background:#0b0b0b; color:#fff; padding:36px}
  @media(min-width:640px){ .hero-text{padding:48px} }
  @media(min-width:1024px){ .hero-text{padding:84px 68px} }
  .hero-media{position:relative; height:360px}
  @media(min-width:640px){ .hero-media{height:460px} }
  @media(min-width:1024px){ .hero-media{height:auto} }
  .hero-media img{width:100%; height:100%; object-fit:cover}
  .overlay{position:absolute; inset:0; background:linear-gradient(to top, rgba(0,0,0,.3), transparent 55%)}
  .hero-inner{max-width:720px}
  .hero-lead{color:#d1d5db}

  /* ====== Features ====== */
  .features{display:grid; grid-template-columns:1fr; gap:16px}
  @media(min-width:900px){ .features{grid-template-columns:repeat(3,1fr)} }
  .feature{border:1px solid var(--border); border-radius:14px; padding:20px; background:#fff; transition:transform .2s ease, box-shadow .2s ease}
  .feature:hover{transform:translateY(-2px); box-shadow:var(--shadow)}
  .feature .icon{font-size:24px}
  .feature h4{margin:10px 0 6px; font-size:18px; font-weight:800}

  /* ====== CTA ====== */
  .cta{border:1px solid rgba(59,130,246,.25); background:#fff; border-radius:20px; text-align:center; padding:48px 22px}
  .cta .title{font-size:36px; font-weight:800}

  /* ====== Forms ====== */
  .input{width:100%; padding:12px 14px; border:1px solid #d1d5db; border-radius:10px; outline:none; font-size:16px}
  .input:focus{border-color:var(--brand); box-shadow:0 0 0 3px rgba(59,130,246,.15)}

  /* ====== Reveal animation (smoother) ====== */
  .reveal{
    opacity:0;
    transform:translateY(18px) scale(.995);
    filter:blur(4px);
    transition:
      opacity .8s cubic-bezier(.22,1,.36,1),
      transform .8s cubic-bezier(.22,1,.36,1),
      filter .8s cubic-bezier(.22,1,.36,1);
    will-change:opacity, transform, filter;
  }
  .reveal.in-view{
    opacity:1;
    transform:none;
    filter:none;
  }
  @media (prefers-reduced-motion: reduce){
    .reveal{transition:none; transform:none; filter:none; opacity:1}
  }


  :root{
    --ink:#0f172a;
    --muted:#475569;
    --border:#e5e7eb;
    --brand:#111;
    --link:#111;
    --accent:#3b82f6;
    --card:#f8fafc;
    --good:#10b981; --warn:#f59e0b; --bad:#ef4444;
  }
  html{scroll-behavior:smooth}
  body{margin:0; background:#fff; color:var(--ink);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,Noto Sans,sans-serif}
  a{color:var(--link); text-decoration:none}
  a:hover{opacity:.8}
  .container{max-width:1200px; padding:0 20px; margin:0 auto}


  /* Hero */
  .hero{padding:28px 0 8px}
  .hero h1{font-size:40px; line-height:1.15; margin:0 0 6px; font-weight:900}
  .hero p{color:var(--muted); margin:0}

  /* Cards & questions */
  .card{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:16px; margin-top:14px}
  .section-title{font-size:22px; font-weight:900; margin:6px 0 6px}
  .q{padding:14px; background:#fff; border:1px solid var(--border); border-radius:14px; margin:12px 0}
  .q.invalid{border-color:var(--bad); box-shadow:0 0 0 3px rgba(239,68,68,.12)}
  .q h4{margin:0 0 10px; font-size:16px}
  .opt{display:grid; gap:10px}
  .opt.opt-4{grid-template-columns:repeat(4,minmax(0,1fr))}
  .opt.opt-5{grid-template-columns:repeat(5,minmax(0,1fr))}
  .opt label{display:flex; align-items:center; justify-content:center; gap:8px;
             padding:12px 10px; border:1.5px solid var(--border); border-radius:12px;
             cursor:pointer; user-select:none; background:#fafafa; text-align:center;
             font-weight:800; white-space:nowrap}
  input[type=radio]{display:none}
  input[type=radio]:checked + label {
    border-color:#facc15;      /* v√†ng ‚Äì b·∫°n c√≥ th·ªÉ ƒë·ªïi */
    background:#fff3c4;        /* v√†ng nh·∫°t */
    box-shadow:0 0 0 3px rgba(250,204,21,0.25); /* vi·ªÅn v√†ng m·ªù khi ch·ªçn */
	}

  .subtle{color:var(--muted); font-size:14px}

  /* Plain buttons to match site style */
  .btn{display:inline-flex; align-items:center; justify-content:center; padding:10px 16px;
       border-radius:12px; border:1.5px solid #cbd5e1; background:#fff; color:#111; font-weight:800}
  .btn:hover{border-color:#a5b4fc}
  .btn.secondary{background:#fff}

  /* Result */
  .result{display:none; margin-top:16px}
  .pill{display:inline-block; padding:6px 10px; border-radius:999px; font-weight:800; font-size:12px; margin-right:6px}
  .good{background:rgba(16,185,129,.12); color:var(--good)}
  .warn{background:rgba(245,158,11,.12); color:var(--warn)}
  .bad{background:rgba(239,68,68,.12); color:var(--bad)}

  .alert{display:none; background:#fef2f2; border:1px solid #fecaca; color:#991b1b; border-radius:12px; padding:12px 14px; margin-top:12px; font-size:14px}
  .note{display:none; background:#fff7ed; border:1px solid #fed7aa; color:#9a3412; border-radius:12px; padding:10px 12px; font-size:14px; margin-top:10px}
  .games{display:none; margin-top:14px}
  .game-grid{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px}
  .game{background:#fff; border:1px solid var(--border); border-radius:12px; padding:12px}
  .game h5{margin:0 0 4px; font-size:15px}
  .game p{margin:0; font-size:13px; color:var(--muted)}

  footer{padding:28px 0 36px; border-top:1px solid var(--border); margin-top:26px}
  .footer-row{display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap; color:var(--muted); font-size:14px}
  .footer-links{display:flex; gap:22px; flex-wrap:wrap; font-weight:800}

  /* Active link underline for current page */
  .links a[aria-current="page"]{text-decoration:underline}
  /* Slightly larger max-width to match other pages */
  .container{max-width:1260px; padding:0 24px; margin:0 auto}
  /* Sticky header with subtle blur like site */
  .navbar{position:sticky; top:0; z-index:50; background:rgba(255,255,255,.96);
          border-bottom:1px solid var(--border); backdrop-filter:saturate(160%) blur(8px)}
  /* Spacing polish */
  .hero{padding:36px 0 6px}
  .card{padding:20px}
  .q h4{font-size:17px}
  .btn{padding:12px 18px; border-radius:12px}
  #calcBtn{border-color:#a5b4fc}
  /* Result panel visual */
  #result.card{background:#fff; border:1.5px solid var(--border)}


  /* === Alignment polish for survey === */
  .hero .container, main.container{max-width:980px}
  .hero h1{margin:0 0 8px; font-weight:900; letter-spacing:.01em}
  .hero .subtle{margin:0 0 10px; font-size:17px; line-height:1.7}
  main.container{display:flex; flex-direction:column; gap:22px}
  .card{border:1px solid var(--border); border-radius:16px; padding:24px}
  .section-title{margin:0 0 6px}

  /* === Straight column alignment === */
  .hero .container, main.container{max-width:1140px}
  .q{margin:14px 0}
  .opt{display:grid; grid-template-columns:repeat(4,1fr); gap:14px}
  .opt.opt-5{grid-template-columns:repeat(5,1fr)}
  .opt label{padding:14px 14px; font-size:16px}
  .opt label span.value{min-width:36px; display:inline-block; text-align:center}

  /* === Hero refresh: centered title + cheerful background === */
  .hero{
    padding:56px 0 24px;
    background:
      radial-gradient(1200px 500px at 0% 0%, rgba(59,130,246,.12), transparent 60%),
      radial-gradient(900px 400px at 100% 0%, rgba(16,185,129,.12), transparent 60%),
      radial-gradient(1200px 520px at 50% 100%, rgba(250,204,21,.14), transparent 60%),
      linear-gradient(180deg, #ffffff, #f8fafc);
  }
  .hero .container{
    max-width: 960px;
    text-align:center;
  }
  .hero h1{
    margin: 0 0 10px;
    font-weight: 900;
    letter-spacing: .01em;
  }
  .hero .subtle{
    color:#475569;
    font-size:17px;
    margin:0 auto;
  }


  /* Right-aligned hero copy but centered block */
  .hero-copy{
    max-width: 760px;
    margin: 0 auto;
    text-align: right;
  }


  /* Two-line right-shifted hero text */
  p%;
    max-width: 960px;
    margin-left: auto;  /* push block to the right while staying centered within page grid */
    text-align: right;
    line-height: 1.25;
  }
  .hero-copy-right h1{
    margin: 0 0 .35rem 0;
    font-size: clamp(28px, 4.6vw, 56px);
    font-weight: 800;
    letter-spacing: 0.2px;
  
    white-space: nowrap;}
  .hero-copy-right .subtitle{
    margin: 0;
    font-size: clamp(14px, 1.4vw, 18px);
    opacity: 0.9;
  
    white-space: nowrap;}


/* === Inline Whack-a-mole preview + modal === */
.game{background:#fff; border:1px solid var(--border); border-radius:16px; overflow:hidden; padding:0}
.game .thumb{width:100%; aspect-ratio:16/9; display:block; border-bottom:1px solid var(--border)}
.game .body{padding:12px 14px 16px}
.game h5{margin:0 0 6px; font-size:16px}
.game p{margin:0 0 10px; color:var(--muted); font-size:13px}
.btn.small{padding:8px 12px; font-size:14px; border-radius:10px}

/* Preview art */
.thumb.whack{background:linear-gradient(135deg,#dbeafe,#fef9c3); position:relative}
.thumb.whack::before{content:""; position:absolute; inset:auto 12% 8% 12%; height:55%; border-radius:16px; background:linear-gradient(180deg,#fde68a,#f59e0b); box-shadow:0 8px 16px rgba(245,158,11,.25)}

/* Modal */
.modal{position:fixed; inset:0; background:rgba(2,6,23,.5); display:none; z-index:1000; align-items:center; justify-content:center; padding:18px}
.modal.show{display:flex}
.modal-dialog{width:min(880px,95vw); background:#fff; border-radius:16px; overflow:hidden; border:1px solid var(--border); box-shadow:0 20px 60px rgba(2,6,23,.35)}
.modal-header{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border)}
.modal-body{padding:16px}
.modal-close{background:white; border:1px solid var(--border); border-radius:10px; padding:6px 10px; cursor:pointer}
.game-wrap{padding:0}
.game-wrap>*{width:100%}

/* Whack-a-mole (3x3) */
.wam-wrap{display:flex;flex-direction:column;align-items:center;gap:10px}
.wam-hud{display:flex;gap:12px;align-items:center;font-weight:700}
.wam-hud .pill{background:#ecfeff;color:#0369a1;padding:4px 10px;border-radius:999px}
.wam-board{width:min(92vw,420px);aspect-ratio:1/1;display:grid;grid-template-columns:repeat(3,1fr);gap:10px;padding:10px;border-radius:16px;background:#f8fafc;border:1px solid var(--border)}
.wam-hole{position:relative;border-radius:14px;background:#ffffff;box-shadow:inset 0 0 0 1px var(--border),0 6px 14px rgba(15,23,42,.08);overflow:hidden;cursor:pointer;user-select:none}
.wam-mole{position:absolute;inset:auto 12% 6% 12%;height:58%;border-radius:16px;background:linear-gradient(180deg,#fde68a,#f59e0b);display:none;box-shadow:0 8px 16px rgba(245,158,11,.25)}
.wam-hole.active .wam-mole{display:block}
.wam-ctrl{display:flex;gap:10px;margin-top:6px}
.wam-ctrl .btn{padding:10px 14px}


  /* ===== Brand logo (file-based) ===== */
  .brand{display:flex; align-items:center; gap:12px; font-weight:800}
  .brand .logo{height:56px; width:auto; object-fit:contain; display:block}
  @media(min-width:900px){ .brand .logo{height:68px} }


footer{padding:32px 0; border-top:1px solid var(--border)}
.footer-links{display:flex; gap:22px; justify-content:center; flex-wrap:wrap; font-weight:700; font-size:14px}
.divider{height:1px; background:var(--border); max-width:820px; margin:12px auto}
.footer-meta{display:flex; justify-content:space-between; align-items:center; gap:16px; max-width:820px; margin:0 auto; color:var(--muted); font-size:14px}
</style>
</head>
<body>
<header class="navbar" id="navbar">
    <nav class=" nav-row">
      <a href="index.html" class="brand"><img class="logo" src="logo.jpg" alt="Logo Tr·∫ßn ƒê·∫°i Nghƒ©a"><span>Edumindcare</span></a>
      <div class="nav-links">
        <a href="about.html">Ph∆∞∆°ng ph√°p c·ªßa Ch√∫ng t√¥i</a>
        <a href="games.html">Nghe nh·∫°c v√† tr√≤ ch∆°i gi·∫£m cƒÉng th·∫≥ng</a>
        <a href="survey.html" aria-current="page">Ki·ªÉm tra s·ª©c kh·ªèe t√¢m th·∫ßn</a>
	<a href="predict.html">ƒê√°nh gi√° c·∫£m x√∫c khu√¥n m·∫∑t</a>
        <a href="contact.html">Li√™n H·ªá</a>
      </div>
    </nav>
  </header>

<section class="hero">
  <div class="container"><div class="hero-copy-right"><h1>KH·∫¢O S√ÅT S·ª®C KH·ªéE T√ÇM TH·∫¶N H·ªåC</h1><p class="subtitle">·ª®ng d·ª•ng tr√≠ tu·ªá nh√¢n t·∫°o (AI) trong ph√°t hi·ªán s·ªõm c√°c d·∫•u hi·ªáu r·ªëi lo·∫°n s·ª©c kh·ªèe t√¢m th·∫ßn</p></div></div>
</section>

<main class="container">
  <div id="phq" class="card">
    <h2 class="section-title">PHQ‚Äë9 (Tr·∫ßm c·∫£m ‚Äî 2 tu·∫ßn qua)</h2>
    <div class="subtle">Ch·ªçn m·ªôt ph∆∞∆°ng √°n cho m·ªói c√¢u h·ªèi.</div>
    <div id="phq-qs"></div>
  </div>

  <div id="gad" class="card">
    <h2 class="section-title">GAD‚Äë7 (Lo √¢u ‚Äî 2 tu·∫ßn qua)</h2>
    <div class="subtle">Ch·ªçn m·ªôt ph∆∞∆°ng √°n cho m·ªói c√¢u h·ªèi.</div>
    <div id="gad-qs"></div>
  </div>

  <div style="display:flex; gap:12px; margin:8px 0 16px">
    <button id="calcBtn" class="btn">Ki·ªÉm tra</button>
    <button id="resetBtn" class="btn secondary">X√≥a l·ª±a ch·ªçn</button>
  </div>

  <div id="alert" class="alert"></div>

  <div id="result" class="card result">
    <h3 style="margin:6px 0 8px; font-size:20px; font-weight:900">K·∫øt qu·∫£ d·ª± ƒëo√°n</h3>
    <div class="subtle">ƒê√¢y l√† c√¥ng c·ª• s√†ng l·ªçc ‚Äì kh√¥ng thay th·∫ø t∆∞ v·∫•n y khoa.</div>
    <div id="badges" style="margin-top:10px"></div>
    <div id="safety" class="note"></div>
    <div id="games" class="games">
      <h4 style="margin:12px 0 6px; font-size:18px">G·ª£i √Ω tr√≤ ch∆°i & ho·∫°t ƒë·ªông</h4>
      <div id="games-grid" class="game-grid"></div>
      <div style="margin-top:12px"><a class="btn" href="gamelist.html">Xem th√™m tr√≤ ch∆°i</a></div>
    </div>
  </div>

<div id="gameModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-header">
      <h3 id="modalTitle" style="margin:0; font-size:18px; font-weight:800">Ch∆°i</h3>
      <button class="modal-close" id="modalClose">ƒê√≥ng</button>
    </div>
    <div class="modal-body"><div id="gameMount" class="game-wrap"></div></div>
  </div>
</div>

</main>

<footer>
  <div class="container" style="text-align:center">
    <div class="footer-links">
      <a href="index.html">Trang Ch·ªß</a>
      <a href="about.html">Ph∆∞∆°ng Ph√°p</a>
      <a href="gamelist.html">Nghe nh·∫°c v√† tr√≤ ch∆°i gi·∫£m cƒÉng th·∫≥ng</a>
      <a href="survey.html">Ki·ªÉm tra s·ª©c kh·ªèe t√¢m th·∫ßn</a>
      <a href="contact.html">Li√™n H·ªá</a>
    </div>
    <div class="divider"></div>
    <div class="footer-meta">
      <p>B·∫£n quy·ªÅn ¬© 2025 Edumindcare. ƒê√£ ƒëƒÉng k√Ω B·∫£n quy·ªÅn.</p>
      <div style="display:flex; gap:16px">
        <a href="terms.html">ƒêi·ªÅu Kho·∫£n & ƒêi·ªÅu Ki·ªán</a>
        <a href="privacy.html">Ch√≠nh S√°ch B·∫£o M·∫≠t</a>
      </div>
    </div>
  </div>
</footer>

<script>
// Data
const PHQ = [
  "Trong 2 tu·∫ßn qua, b·∫°n c√≥ th·∫•y √≠t h·ª©ng th√∫ ho·∫∑c √≠t ni·ªÅm vui khi l√†m c√°c ho·∫°t ƒë·ªông th∆∞·ªùng ng√†y (h·ªçc t·∫≠p, c√¥ng vi·ªác, sinh ho·∫°t c√° nh√¢n‚Ä¶)?",
  "B·∫°n c√≥ c·∫£m gi√°c bu·ªìn b√£, ch√°n n·∫£n, tuy·ªát v·ªçng, ho·∫∑c tinh th·∫ßn ƒëi xu·ªëng h·∫ßu nh∆∞ kh√¥ng c·∫£i thi·ªán?",
  "B·∫°n c√≥ kh√≥ ng·ªß, ng·ªß ch·∫≠p ch·ªùn, t·ªânh gi·∫•c gi·ªØa ƒë√™m ho·∫∑c ng·ªß qu√° nhi·ªÅu so v·ªõi b√¨nh th∆∞·ªùng?",
  "B·∫°n m·ªát m·ªèi, thi·∫øu nƒÉng l∆∞·ª£ng ho·∫∑c d·ªÖ ki·ªát s·ª©c ngay c·∫£ khi l√†m nh·ªØng vi·ªác ƒë∆°n gi·∫£n?",
  "B·∫°n c√≥ ch√°n ƒÉn, ƒÉn k√©m ho·∫∑c ng∆∞·ª£c l·∫°i ƒÉn nhi·ªÅu h∆°n b√¨nh th∆∞·ªùng v√¨ c·∫£m x√∫c?",
  "B·∫°n c√≥ c·∫£m gi√°c t·ª± ti, t·ª± tr√°ch, cho r·∫±ng m√¨nh l√† g√°nh n·∫∑ng, k√©m gi√° tr·ªã so v·ªõi ng∆∞·ªùi kh√°c?",
  "B·∫°n th·∫•y kh√≥ t·∫≠p trung khi l√†m vi·ªác/h·ªçc, ƒë·ªçc s√°ch, xem phim hay tr√≤ chuy·ªán v·ªõi ng∆∞·ªùi kh√°c?",
  "B·∫°n c√≥ l√∫c c·ª≠ ƒë·ªông ch·∫≠m, u·ªÉ o·∫£i, ho·∫∑c b·ªìn ch·ªìn, ƒë·ª©ng ng·ªìi kh√¥ng y√™n ƒë·∫øn m·ª©c ng∆∞·ªùi kh√°c nh·∫≠n ra?",
  "Trong 2 tu·∫ßn qua, c√≥ khi n√†o b·∫°n nghƒ© r·∫±ng m√¨nh kh√¥ng mu·ªën t·ªìn t·∫°i ho·∫∑c c√≥ √Ω nghƒ© l√†m t·ªïn h·∫°i b·∫£n th√¢n?"
];
const GAD = [
  "B·∫°n c√≥ th∆∞·ªùng xuy√™n cƒÉng th·∫≥ng, lo l·∫Øng, b·ªìn ch·ªìn m√† kh√≥ gi·∫£i th√≠ch r√µ nguy√™n nh√¢n?",
  "Khi lo l·∫Øng, b·∫°n c√≥ kh√≥ d·ª´ng l·∫°i ho·∫∑c kh√≥ ki·ªÉm so√°t d√≤ng suy nghƒ© lo √¢u?",
  "B·∫°n c√≥ lo nghƒ© qu√° nhi·ªÅu v·ªÅ nhi·ªÅu v·∫•n ƒë·ªÅ (c√¥ng vi·ªác, h·ªçc t·∫≠p, s·ª©c kh·ªèe, gia ƒë√¨nh‚Ä¶), kh√≥ t√°ch ra ngh·ªâ ng∆°i?",
  "B·∫°n th·∫•y kh√≥ th∆∞ gi√£n, kh√≥ t√¨m ƒë∆∞·ª£c tr·∫°ng th√°i b√¨nh tƒ©nh ngay c·∫£ khi ƒë√£ r·∫£nh?",
  "B·∫°n c√≥ c·∫£m gi√°c b·ªìn ch·ªìn, kh√≥ ng·ªìi y√™n, c∆° th·ªÉ cƒÉng ho·∫∑c gi·∫≠t m√¨nh d·ªÖ d√†ng?",
  "B·∫°n d·ªÖ c√°u ho·∫∑c d·ªÖ kh√≥ ch·ªãu h∆°n b√¨nh th∆∞·ªùng, ph·∫£n ·ª©ng m·∫°nh tr∆∞·ªõc chuy·ªán nh·ªè?",
  "B·∫°n lo s·ª£ ƒëi·ªÅu x·∫•u s·∫Øp x·∫£y ra, hay d·ª± c·∫£m b·∫•t an li√™n t·ª•c?"
];
const LABELS_04 = ["Kh√¥ng h·ªÅ","V√†i ng√†y","H∆°n n·ª≠a s·ªë ng√†y","G·∫ßn nh∆∞ m·ªói ng√†y"];

function renderScale(container, list, name, labels){
  list.forEach((text, i)=>{
    const q = document.createElement('div');
    q.className = 'q';
    q.dataset.group = name; q.dataset.index = i;
    const h = document.createElement('h4');
    h.textContent = (i+1)+'. '+text;
    q.appendChild(h);
    const opt = document.createElement('div');
    opt.className = 'opt opt-'+labels.length;
    for(let v=0; v<labels.length; v++){
      const id = `${name}-${i}-${v}`;
      const input = Object.assign(document.createElement('input'), {type:'radio', name:`${name}-${i}`, id, value:v});
      const lab = document.createElement('label'); lab.htmlFor = id; lab.textContent = `${v} ‚Äî ${labels[v]}`;
      opt.appendChild(input); opt.appendChild(lab);
    }
    q.appendChild(opt);
    container.appendChild(q);
  });
}
renderScale(document.getElementById('phq-qs'), PHQ, 'phq', LABELS_04);
renderScale(document.getElementById('gad-qs'), GAD, 'gad', LABELS_04);

function getSum(prefix, count){
  let sum=0, answered=0;
  for(let i=0;i<count;i++){
    const checked = document.querySelector(`input[name="${prefix}-${i}"]:checked`);
    if(checked){ sum+= +checked.value; answered++; }
  }
  return {sum, answered};
}

function interpretPHQLabel(s){
  if(s<=4) return {label:'kh√¥ng/nh·∫π', cls:'good'};
  if(s<=9) return {label:'nh·∫π', cls:'good'};
  if(s<=14) return {label:'trung b√¨nh', cls:'warn'};
  if(s<=19) return {label:'kh√° n·∫∑ng', cls:'bad'};
  return {label:'n·∫∑ng', cls:'bad'};
}
function interpretGADLabel(s){
  if(s<=4) return {label:'t·ªëi thi·ªÉu', cls:'good'};
  if(s<=9) return {label:'nh·∫π', cls:'good'};
  if(s<=14) return {label:'trung b√¨nh', cls:'warn'};
  return {label:'n·∫∑ng', cls:'bad'};
}

const GAMES_LOW=[
  {title:"T√¥ m√†u th∆∞ gi√£n",desc:"T·∫≠p trung nh·∫π nh√†ng, gi√∫p d·ªãu c·∫£m x√∫c."},
  {title:"Gh√©p h√¨nh 3√ó3",desc:"TƒÉng ch√∫ √Ω ng·∫Øn, c·∫£m gi√°c ho√†n th√†nh."},
  {title:"X·∫øp g·∫°ch c·ªï ƒëi·ªÉn",desc:"Nh·ªãp ƒë·ªÅu, gi·∫£m xao nh√£ng."},
  {title:"N√¥ng tr·∫°i vui v·∫ª",desc:"T√°c v·ª• nh·ªè, gi·∫£i t·ªèa nh·∫π."},
  {title:"Sudoku d·ªÖ",desc:"R√®n t·∫≠p trung 5‚Äì10 ph√∫t."}
];
const GAMES_MED=[
  {title:"Play Together (mini game)",desc:"T∆∞∆°ng t√°c x√£ h·ªôi, gi·∫£i t·ªèa √°p l·ª±c."},
  {title:"T√¥ m√†u n√¢ng cao + th·ªü",desc:"H√≠t th·ªü h·ªôp 4√ó4√ó4√ó4."},
  {title:"Gh√©p h√¨nh l·ªõn",desc:"Chia m·ª•c ti√™u nh·ªè, gi·∫£m √°p l·ª±c."},
  {title:"ƒêi b·ªô & nghe nh·∫°c",desc:"10‚Äì15 ph√∫t, h·∫° nh·ªãp th·∫ßn kinh."},
  {title:"Rhythm lite",desc:"Gi·∫£i ph√≥ng nƒÉng l∆∞·ª£ng v·ª´a."}
];
const GAMES_HIGH=[
  {title:"H√≠t th·ªü 4‚Äë7‚Äë8 + grounding",desc:"·ªîn ƒë·ªãnh nhanh 3‚Äì5 ph√∫t."},
  {title:"Nh·∫≠t k√Ω 3 ph√∫t",desc:"ƒê·∫∑t t√™n c·∫£m x√∫c, g·ª° r·ªëi suy nghƒ©."},
  {title:"Action lite 5 ph√∫t",desc:"X·∫£ nƒÉng l∆∞·ª£ng c√≥ ki·ªÉm so√°t."},
  {title:"Li√™n h·ªá ng∆∞·ªùi tin c·∫≠y",desc:"Tr√≤ chuy·ªán l√†m d·ªãu cƒÉng th·∫≥ng."},
  {title:"Thi·ªÅn body scan",desc:"Th∆∞ gi√£n to√†n th√¢n ng·∫Øn."}
];

function pickFour(arr){ return arr.slice(0,4); }

function validateAll(){
  document.querySelectorAll('.q.invalid').forEach(el=>el.classList.remove('invalid'));
  const missing=[];
  document.querySelectorAll('.q').forEach(q=>{
    const name = `${q.dataset.group}-${q.dataset.index}`;
    const checked = document.querySelector(`input[name="${name}"]:checked`);
    if(!checked){ q.classList.add('invalid'); missing.push(`${q.dataset.group.toUpperCase()}-${+q.dataset.index+1}`); }
  });
  const alertBox=document.getElementById('alert');
  if(missing.length){
    alertBox.style.display='block';
    alertBox.innerHTML="<b>C·∫ßn ho√†n thi·ªán kh·∫£o s√°t:</b> thi·∫øu c√¢u "+missing.join(', ');
    document.querySelector('.q.invalid').scrollIntoView({behavior:'smooth',block:'center'});
    return false;
  }else{
    alertBox.style.display='none'; alertBox.innerHTML="";
    return true;
  }
}

function computeLabels(){
  const phq=getSum('phq',PHQ.length);
  const gad=getSum('gad',GAD.length);
  return {
    phq:interpretPHQLabel(phq.sum),
    gad:interpretGADLabel(gad.sum),
    suThought:+document.querySelector('input[name="phq-8"]:checked').value
  };
}

document.getElementById('calcBtn').addEventListener('click',()=>{
  if(!validateAll()) return;
  const lv=computeLabels();
  const badges=document.getElementById('badges'); badges.innerHTML="";
  const map={PHQ:lv.phq,GAD:lv.gad};
  Object.keys(map).forEach(k=>{
    const s=document.createElement('span'); s.className='pill '+map[k].cls; s.textContent=`${k}: ${map[k].label}`; badges.appendChild(s);
  });
  const safety=document.getElementById('safety');
  if(lv.suThought>=1){ safety.style.display='block'; safety.innerHTML="<b>L∆∞u √Ω an to√†n:</b> N·∫øu c√≥ √Ω nghƒ© t·ª± h·∫°i, h√£y t√¨m tr·ª£ gi√∫p ngay (115 / c∆° s·ªü y t·∫ø / ng∆∞·ªùi tin c·∫≠y)."; }
  else { safety.style.display='none'; safety.innerHTML=""; }

  const severe=(lv.phq.cls==='bad')||(lv.gad.cls==='bad');
  const moderate=(lv.phq.cls==='warn')||(lv.gad.cls==='warn');
  const list= severe?pickFour(GAMES_HIGH): (moderate?pickFour(GAMES_MED):pickFour(GAMES_LOW));

  const grid=document.getElementById('games-grid'); grid.innerHTML="";
  list.forEach(g=>{ const c=document.createElement('div'); c.className='game'; c.innerHTML=`<h5>${g.title}</h5><p>${g.desc}</p>`; grid.appendChild(c); });
  document.getElementById('games').style.display='block';

  const result=document.getElementById('result'); result.style.display='block'; result.scrollIntoView({behavior:'smooth',block:'start'});
});

document.getElementById('resetBtn').addEventListener('click',()=>{
  document.querySelectorAll('input[type=radio]').forEach(r=>r.checked=false);
  document.getElementById('alert').style.display='none';
  document.getElementById('result').style.display='none';
  document.querySelectorAll('.q.invalid').forEach(el=>el.classList.remove('invalid'));
});

document.addEventListener('change',e=>{
  if(e.target.matches('input[type=radio]')){
    const [group,idx]=e.target.name.split('-');
    const q=document.querySelector(`.q[data-group="${group}"][data-index="${idx}"]`);
    if(q) q.classList.remove('invalid');
  }
});

// ==== Modal ====
const __modal=(()=>{const el=document.getElementById('gameModal');const titleEl=document.getElementById('modalTitle');const mount=document.getElementById('gameMount');const closeBtn=document.getElementById('modalClose');function open({title,build}){titleEl.textContent=title||'Tr√≤ ch∆°i';mount.innerHTML='';build&&build(mount);el.classList.add('show');el.setAttribute('aria-hidden','false')}function close(){el.classList.remove('show');el.setAttribute('aria-hidden','true');mount.innerHTML=''}closeBtn.addEventListener('click',close);el.addEventListener('click',e=>{if(e.target===el)close()});document.addEventListener('keydown',e=>{if(e.key==='Escape'&&el.classList.contains('show'))close()});return{open,close}})();

// ==== Whack-a-mole builder ====

function buildWhack(m){
  const wrap=document.createElement('div'); wrap.className='wam-wrap';
  const hud=document.createElement('div'); hud.className='wam-hud';
  hud.innerHTML='<span class="pill" id="wamTime">30s</span><span class="pill">ƒêi·ªÉm: <b id="wamScore">0</b></span><span class="pill">C·∫•p: <b id="wamLv">1</b></span>';
  const board=document.createElement('div'); board.className='wam-board';
  for(let i=0;i<9;i++){ const h=document.createElement('div'); h.className='wam-hole'; h.innerHTML='<div class="wam-mole"></div>'; board.appendChild(h); }
  const ctrl=document.createElement('div'); ctrl.className='wam-ctrl'; ctrl.innerHTML='<button class="btn" id="wamStart">B·∫Øt ƒë·∫ßu</button>';
  wrap.appendChild(hud); wrap.appendChild(board); wrap.appendChild(ctrl); m.appendChild(wrap);

  // Progressive difficulty:
  // - Level increases m·ªói 6s => gi·∫£m th·ªùi gian gi·ªØa l·∫ßn xu·∫•t hi·ªán (spawnRate) v√† r√∫t ng·∫Øn th·ªùi gian hi·ªán (life)
  // - Sau 18s, c√≥ th·ªÉ xu·∫•t hi·ªán 2 n·ªët c√πng l√∫c (multiSpawn)
  let gameTimer=null, spawnTimer=null, level=1, left=30, score=0;
  let spawnRate=900;     // ms, s·∫Ω gi·∫£m theo level
  let life=900;          // th·ªùi gian m·ªôt "chu·ªôt" t·ªìn t·∫°i (ms)
  let multiSpawn=false;
  const holes=[...board.children];

  function setLevelByTime(){
    const elapsed = 30-left; // s
    const newLv = 1 + Math.floor(elapsed/6); // 1..5
    if(newLv!==level){
      level=newLv;
      document.getElementById('wamLv').textContent=level;
      // scale difficulty
      spawnRate = Math.max(350, 900 - (level-1)*120);
      life = Math.max(350, 900 - (level-1)*130);
      if(elapsed>=18) multiSpawn=true;
      restartSpawner();
    }
  }

  function spawnOnce(){
    // clear expired moles
    holes.forEach(h=>h.classList.remove('active'));
    // choose 1 or 2 holes
    const count = multiSpawn ? 1 + Math.round(Math.random()) : 1;
    const picks = [];
    while(picks.length<count){
      const idx = Math.floor(Math.random()*holes.length);
      if(!picks.includes(idx)) picks.push(idx);
    }
    picks.forEach(i=>{
      const hole = holes[i];
      hole.classList.add('active');
      // auto hide after life
      setTimeout(()=> hole.classList.remove('active'), life);
    });
  }

  function restartSpawner(){
    if(spawnTimer) clearInterval(spawnTimer);
    spawnTimer = setInterval(spawnOnce, spawnRate);
  }

  board.addEventListener('click',e=>{
    const hole=e.target.closest('.wam-hole'); if(!hole) return;
    if(hole.classList.contains('active')){
      score++; document.getElementById('wamScore').textContent=score;
      hole.classList.remove('active');
    }
  });

  document.getElementById('wamStart').addEventListener('click',()=>{
    // reset
    score=0; left=30; level=1; spawnRate=900; life=900; multiSpawn=false;
    document.getElementById('wamScore').textContent='0';
    document.getElementById('wamTime').textContent='30s';
    document.getElementById('wamLv').textContent='1';
    holes.forEach(h=>h.classList.remove('active'));

    // start timers
    if(gameTimer) clearInterval(gameTimer);
    if(spawnTimer) clearInterval(spawnTimer);
    gameTimer = setInterval(()=>{
      left--; document.getElementById('wamTime').textContent=left+'s';
      setLevelByTime();
      if(left<=0){
        clearInterval(gameTimer); clearInterval(spawnTimer);
        holes.forEach(h=>h.classList.remove('active'));
      }
    },1000);
    restartSpawner();
    spawnOnce(); // immediate first
  });
}


// ==== Render: only one game card ====
function renderInlineGames(){
  const grid=document.getElementById('games-grid'); if(!grid) return;
  grid.innerHTML='';
  const card=document.createElement('div'); card.className='game';
  card.innerHTML=`<div class="thumb whack"></div>
    <div class="body">
      <h5>ƒê·∫≠p chu·ªôt (Whack‚Äëa‚Äëmole)</h5>
      <p>Ch·∫°m v√†o chu·ªôt ch≈©i khi xu·∫•t hi·ªán ƒë·ªÉ ghi ƒëi·ªÉm trong 30s.</p>
      <button class="btn small">Ch∆°i</button>
    </div>`;
  card.querySelector('button').addEventListener('click',()=>__modal.open({title:'ƒê·∫≠p chu·ªôt (Whack‚Äëa‚Äëmole)',build:buildWhack}));
  card.querySelector('.thumb').addEventListener('click',()=>__modal.open({title:'ƒê·∫≠p chu·ªôt (Whack‚Äëa‚Äëmole)',build:buildWhack}));
  grid.appendChild(card);
}

document.getElementById('calcBtn')?.addEventListener('click', ()=> { setTimeout(()=> renderInlineGames(), 0); });

</script>
<div id="chatbot-btn">üí¨</div>

<div id="chatbot-box">
  <div id="chatbot-header">
    ü§ñ Edumindcare
    <span>H·ªó tr·ª£ s·ª©c kh·ªèe tinh th·∫ßn</span>
  </div>

  <div id="chatbot-messages">
    <div class="chat-msg chat-bot">
      Xin ch√†o üëã<br>
      T√¥i l√† tr·ª£ l√Ω Edumindcare. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?
    </div>
  </div>

  <div id="chatbot-input">
    <input id="chatbot-text" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n‚Ä¶" />
    <button onclick="sendChat()">G·ª≠i</button>
  </div>
</div>
<script>
const API_URL = "https://stressbackend.onrender.com/chat";

const btn = document.getElementById("chatbot-btn");
const box = document.getElementById("chatbot-box");
const input = document.getElementById("chatbot-text");
const messages = document.getElementById("chatbot-messages");

btn.onclick = () => {
  box.style.display = box.style.display === "flex" ? "none" : "flex";
};

function addMsg(text, cls){
  const div = document.createElement("div");
  div.className = "chat-msg " + cls;
  div.innerHTML = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

async function sendChat(){
  const msg = input.value.trim();
  if(!msg) return;

  addMsg(msg, "chat-user");
  input.value = "";

  const typing = document.createElement("div");
  typing.className = "chat-msg chat-bot";
  typing.innerText = "ƒêang nh·∫≠p‚Ä¶";
  messages.appendChild(typing);
  messages.scrollTop = messages.scrollHeight;

  try{
    const res = await fetch(API_URL,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ message: msg })
    });
    const data = await res.json();
    typing.remove();
    addMsg(data.reply, "chat-bot");
  }catch(e){
    typing.remove();
    addMsg("‚ö†Ô∏è Kh√¥ng k·∫øt n·ªëi ƒë∆∞·ª£c m√°y ch·ªß. Vui l√≤ng th·ª≠ l·∫°i.", "chat-bot");
  }
}

input.addEventListener("keydown", e=>{
  if(e.key === "Enter") sendChat();
});
</script>

</body>
</html>
