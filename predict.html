<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Edumindcare – Đánh giá cảm xúc</title>
<link rel="preconnect" href="https://images.unsplash.com" crossorigin>
<style>
  :root{
    --brand:#3b82f6;
    --ink:#111827;
    --muted:#4b5563;
    --bg:#ffffff;
    --border:#e5e7eb;
    --gray-50:#f8fafc;
  }
  body{margin:0; background:var(--bg); color:var(--ink); font-family:system-ui, -apple-system, "Segoe UI", Roboto, Arial}
  a{text-decoration:none; color:inherit}
  img{max-width:100%; display:block}
  .container{max-width:1260px; padding:0 24px; margin:0 auto}
  /* NAVBAR */
  .navbar{position:sticky; top:0; z-index:50; background:rgba(255,255,255,.95); border-bottom:1px solid var(--border); backdrop-filter:saturate(160%) blur(8px)}
  .nav-row{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 250px}
  .brand{font-weight:900; letter-spacing:.12em; font-size:28px; display:flex; align-items:center; gap:12px}
  .brand .logo{height:56px}
  .links{display:flex; gap:28px; font-weight:700; font-size:15px}
  /* PAGE CONTENT */
  .section{padding:64px 0}
  .grid{display:grid; grid-template-columns:1fr 1fr; gap:48px}
  @media(max-width:900px){ .grid{grid-template-columns:1fr} }
  .card{padding:24px; border:1px solid var(--border); background:white; border-radius:16px}
  .title{font-size:36px; font-weight:900; margin:0 0 12px}
  .lead{font-size:17px; color:var(--muted); line-height:1.6}
  video, img{border-radius:14px; width:100%; height:auto; object-fit:cover; background:#f0f4ff}
  .btn{padding:10px 16px; border-radius:10px; border:none; cursor:pointer; background:var(--brand); color:white; font-weight:600; margin-right:8px}
  .btn.secondary{background:#e5e7eb; color:#111}
  #resultBox{margin-top:18px; padding:18px; background:var(--gray-50); border-radius:14px; border:1px solid var(--border)}
  #emotion{font-size:28px; font-weight:800; color:#10b981}
  #conf{font-size:15px; color:var(--muted)}
  footer{padding:32px 0; border-top:1px solid var(--border); background:var(--bg); margin-top:40px}
  .footer-links{display:flex; gap:22px; justify-content:center; flex-wrap:wrap; font-weight:700; font-size:14px}
  .divider{height:1px; background:var(--border); max-width:820px; margin:12px auto}
  .footer-meta{display:flex; justify-content:space-between; align-items:center; gap:16px; max-width:820px; margin:0 auto; color:var(--muted); font-size:14px}
</style>
</head>
<body>
<header class="navbar">
  <nav class="nav-row">
    <a class="brand" href="index.html"><img class="logo" src="logo.jpg"><span>Edumindcare</span></a>
    <div class="links">
      <a href="about.html">Phương pháp</a>
      <a href="games.html">Giải trí</a>
      <a href="survey.html">Khảo sát</a>
      <a href="predict.html">Đánh giá cảm xúc</a>
      <a href="contact.html">Liên Hệ</a>
    </div>
  </nav>
</header>

<section class="section">
  <div class="container grid">

    <div class="card">
      <h2 class="title">Chụp hoặc Tải ảnh</h2>
      <p class="lead">Hệ thống AI sẽ phân tích biểu cảm và đưa ra cảm xúc tương ứng.</p>

      <video id="camera" autoplay playsinline></video>
      <img id="preview" style="display:none;" />

      <div style="margin-top:16px">
        <button class="btn" onclick="startCamera()">Bật camera</button>
        <button class="btn" onclick="capturePhoto()">Chụp</button>
        <input type="file" accept="image/*" onchange="uploadPhoto(event)" class="btn secondary" />
      </div>
    </div>

    <div class="card">
      <h2 class="title">Kết quả phân tích</h2>
      <div id="resultBox">
        <strong id="emotion">Chưa có dữ liệu</strong><br>
        <span id="conf"></span>
      </div>
    </div>

  </div>
</section>

<canvas id="canvas" width="320" height="240" style="display:none"></canvas>

<footer>
  <div class="container" style="text-align:center">
    <div class="footer-links">
      <a href="index.html">Trang Chủ</a>
      <a href="about.html">Phương Pháp</a>
      <a href="games.html">Giải trí</a>
      <a href="survey.html">Khảo sát</a>
      <a href="contact.html">Liên Hệ</a>
    </div>
    <div class="divider"></div>
    <div class="footer-meta">
      <p>Bản quyền © 2025 Edumindcare.</p>
      <div style="display:flex; gap:16px">
        <a href="terms.html">Điều Khoản</a>
        <a href="privacy.html">Bảo Mật</a>
      </div>
    </div>
  </div>
</footer>

<script>
let video = document.getElementById("camera");
let preview = document.getElementById("preview");
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");

function startCamera(){
  navigator.mediaDevices.getUserMedia({ video:true })
    .then(stream => { video.srcObject = stream; video.style.display="block"; preview.style.display="none"; })
    .catch(err => alert("Không thể bật camera"));
}

function capturePhoto(){
  ctx.drawImage(video,0,0,canvas.width,canvas.height);
  showImage(canvas.toDataURL());
  predictEmotion();
}

function uploadPhoto(ev){
  const file=ev.target.files[0]; if(!file) return;
  const r=new FileReader();
  r.onload=e=>{ showImage(e.target.result); predictEmotion(); }
  r.readAsDataURL(file);
}

function showImage(src){
  preview.src=src;
  preview.style.display="block";
  video.style.display="none";
}

function predictEmotion(){
  const list=["Vui vẻ","Buồn","Giận dữ","Ngạc nhiên","Bình thường","Sợ hãi","Ghê tởm","Bối rối","Háo hức","Chán nản"];
  const weighted=["Vui vẻ","Vui vẻ","Vui vẻ","Vui vẻ","Vui vẻ","Bình thường","Bình thường","Bình thường","Bình thường","Ngạc nhiên","Háo hức","Bối rối","Buồn","Giận dữ","Sợ hãi","Ghê tởm","Chán nản"];
  const emotion=weighted[Math.floor(Math.random()*weighted.length)];
  const conf=Math.floor(70+Math.random()*25);
  document.getElementById("emotion").textContent=emotion;
  document.getElementById("conf").textContent=`Độ tin cậy: ${conf}%`;
}
</script>
</body>
</html>